<!DOCTYPE html>
<html lang="es">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Mapeo Verde</title>
    <link rel="icon" type="image/svg+xml" href="/favicon.svg" />
    <script>
      // Single Page Apps for GitHub Pages
      // This script redirects to index.html with the current path as a query parameter
      // BUT only for application routes, not for static assets (JS, CSS, images, etc.)
      (function() {
        var path = window.location.pathname;
        
        // Don't redirect if this is a static asset request
        // Check for common asset file extensions
        var assetExtensions = ['.js', '.css', '.json', '.png', '.jpg', '.jpeg', '.gif', '.svg', '.ico', '.woff', '.woff2', '.ttf', '.eot', '.map'];
        var isAsset = assetExtensions.some(function(ext) {
          return path.toLowerCase().endsWith(ext);
        });
        
        // Don't redirect if it's an asset or if it's already index.html
        if (isAsset || path.endsWith('/index.html') || path.endsWith('index.html')) {
          return;
        }
        
        var basePath = '/mapeo-verde';
        var isGitHubPages = path.includes(basePath);
        
        // Determine the base path and app path
        var appPath;
        var indexPath;
        
        if (isGitHubPages) {
          // Extract the path after /mapeo-verde
          appPath = path.replace(basePath, '') || '/';
          indexPath = basePath + '/index.html';
        } else {
          // For production domain (mapeoverde.org) or local development
          appPath = path || '/';
          indexPath = '/index.html';
        }
        
        var search = window.location.search;
        var hash = window.location.hash;
        
        // Redirect to index.html with the path as a query parameter
        var newURL = indexPath + '?redirect=' + encodeURIComponent(appPath + search + hash);
        
        window.location.replace(newURL);
      })();
    </script>
  </head>
  <body>
    <div id="root">Redirecting...</div>
  </body>
</html>

